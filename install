#!/bin/bash
# Fichero de instalacion para los scripts y ejemplos de buffer overflow

if [ "$EUID" -ne 0  ]
	then echo "Please run as root"
	exit
fi

echo [+] Checking installed software
apt update
apt install gcc-multilib

echo [+] Installing PEDA
git clone https://github.com/longld/peda.git ~/peda
echo "source ~/peda/peda.py" >> ~/.gdbinit

echo [+] Changing file permissions 
chmod +x ./stackOverflow/compile
chmod +x ./stackOverflow/rop.py
chmod +x ./stackOverflow/vuln_stack_nx
chmod +x ./stackOverflow/vuln_stack_nonx
chmod +x ./stackOverflow/overflow_example
chmod +x ./stackOverflow/reto

echo [+] Creating symbolic link for vuln_stack executable
ln -s ./stackOverflow/vuln_stack_nonx ./stackOverflow/vuln

echo [+] Deactivating ASLR protection
echo 0 > /proc/sys/kernel/randomize_va_space
